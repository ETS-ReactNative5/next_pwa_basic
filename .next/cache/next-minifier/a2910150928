{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{h49W:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"default\",(function(){return w}));var o=n(\"1OyB\"),r=n(\"vuIU\"),i=n(\"JX7q\");function c(t,e){return(c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var u=n(\"U8pU\");function a(t,e){return!e||\"object\"!==Object(u.a)(e)&&\"function\"!==typeof e?Object(i.a)(t):e}function s(t){return(s=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var l=n(\"rePB\"),f=n(\"q1tI\"),p=n.n(f),h=n(\"BMua\"),b=n(\"ofer\"),d=p.a.createElement;function y(){if(\"undefined\"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if(\"function\"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}var g=\"BCj54G9kp6-MuxVje45_rEdNd24WnFaDLOquVDqrdeqGy_NwwaeTovYJoKdP429zTri6hqypw4TXKMFF6a57aMQ\";function v(t){for(var e=(t+\"=\".repeat((4-t.length%4)%4)).replace(/\\-/g,\"+\").replace(/_/g,\"/\"),n=window.atob(e),o=new Uint8Array(n.length),r=0;r<n.length;++r)o[r]=n.charCodeAt(r);return o}var w=function(t){!function(t,e){if(\"function\"!==typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function\");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}(u,t);var e,n=(e=u,function(){var t,n=s(e);if(y()){var o=s(this).constructor;t=Reflect.construct(n,arguments,o)}else t=n.apply(this,arguments);return a(this,t)});function u(t){var e;return Object(o.a)(this,u),e=n.call(this,t),Object(l.a)(Object(i.a)(e),\"configurePushSubscription\",(function(){var t;(e.setState({loading:!0}),console.log(\"you are inside the web notification subscription code !!\"),!1 in navigator)||navigator.serviceWorker.ready.then((function(e){return(t=e).pushManager.getSubscription()})).then((function(e){return null===e?(console.log(\"we dont have the subcription\"),t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:v(g)}).then((function(t){console.log(\"user is subscribed\",t)}))):(console.log(\"we have the subcription\",e),e)})).then((function(t){console.log(\"this is subsciriton body\",t);return fetch(\"https://pwa-serv-notify.herokuapp.com/api/pwa/subscribe\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Accept:\"application/json\"},body:JSON.stringify(t)})})).then((function(t){t.ok&&(console.log(\"new subscriber is added to DB \",t),this.setState({loading:!1}),document.getElementById(\"sub-notification\").style.display=\"none\")})).catch((function(t){this.setState({loading:!1}),console.log(\"server : App subscriber error \",t)}))})),e.state={isLoading:!1},e}return Object(r.a)(u,[{key:\"render\",value:function(){var t=this;return d(\"div\",null,d(h.a,null,d(b.a,{children:\"Notification\",variant:\"h6\"}),this.state.isLoading&&d(\"h3\",null,\"Loading...\"),d(\"h6\",null,\"Start Notification from server \"),d(\"button\",{onClick:function(){return t.configurePushSubscription()}},\"Start Server Notification\")))}}]),u}(f.Component)},l8O1:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/notification\",function(){return n(\"h49W\")}])}},[[\"l8O1\",0,2,1,3]]]);"}